
<!--begin::Root-->
<div class="d-flex flex-column flex-root" id="kt_app_root">

    <!--begin::Authentication - Sign-in -->
    <div class="d-flex flex-column flex-lg-row flex-column-fluid">

        <!--begin::Body-->
        <div class="d-flex flex-column flex-lg-row-fluid w-lg-50 p-10">

            <!--begin::Form-->
            <div class="d-flex flex-center flex-column flex-lg-row-fluid">

                <!--begin::Wrapper-->
                <div class="w-lg-400px p-10">

                    <!--begin::Form-->
                    <form class="form w-100" [formGroup]="myForm" (ngSubmit)="login()">

                    <!--begin::Heading-->
                    <div class="text-center mb-11">
                        <img src="assets/img/ted.png" alt="logo" width="45%" height="80%">
                        <h1 class="text-dark fw-bolder mb-3">Sistema de Recepcion de Candidatos</h1>
                        <div class="text-gray-500 fw-semibold fs-6">Ingrese sus credenciales</div>
                        
                        <!-- Alertas de seguridad -->
                        @if (isBlocked) {
                        <div class="alert alert-danger mt-3">
                        <i class="fas fa-shield-alt me-2"></i>
                        <strong>Cuenta temporalmente bloqueada</strong>
                        <div class="small">{{ getRemainingTimeText() }}</div>
                        </div>
                        }
                        
                        @if (getAttemptsCount() > 0 && !isBlocked) {
                        <div class="alert alert-warning mt-3">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Advertencia de seguridad</strong>
                        <div class="small">Intentos fallidos: {{ getAttemptsCount() }}/5</div>
                        </div>
                        }
                    </div>
                    <!--end::Heading-->

                    <!-- Inputs del formulario -->
                    <div class="fv-row mb-8">
                        <input formControlName="usuario" 
                            (input)="onInputChange()"
                            [class.is-invalid]="myForm.get('usuario')?.invalid && myForm.get('usuario')?.touched"
                            class="form-control form-control-lg form-control-solid" 
                            type="text" 
                            autocomplete="username"
                            placeholder="Usuario"/>
                    </div>

                    <div class="fv-row mb-3">
                        <input formControlName="contrasena" 
                            (input)="onInputChange()"
                            [class.is-invalid]="myForm.get('contrasena')?.invalid && myForm.get('contrasena')?.touched"
                            class="form-control form-control-lg form-control-solid" 
                            type="password" 
                            autocomplete="current-password"
                            placeholder="ContraseÃ±a"/>
                    </div>

                    <!--begin::Actions-->
                    <div class="text-center">
                        @if (!loading && !isBlocked) {
                        <button [disabled]="!myForm.valid" 
                                type="submit" 
                                class="btn btn-lg btn-primary w-100 mb-5">
                        <span class="indicator-label">Acceder</span>
                        </button>
                        }
                        
                        @if (loading) {
                        <button type="submit" 
                                data-kt-indicator="on" 
                                class="btn btn-lg btn-primary w-100 mb-5">
                        <span class="indicator-label">Verificando...</span>
                        <span class="indicator-progress">
                            Espere... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                        </span>
                        </button>
                        }
                        
                        @if (isBlocked) {
                        <button type="button" 
                                disabled
                                class="btn btn-lg btn-danger w-100 mb-5">
                        <i class="fas fa-lock me-2"></i>
                        Cuenta Bloqueada
                        </button>
                        }
                    </div>
                    <!--end::Actions-->
                    </form>
                    <!--end::Form-->

                </div>
                <!--end::Wrapper-->

            </div>
            <!--end::Form-->

            <!--begin::Footer-->
            <!-- <div class="d-flex flex-center flex-wrap px-5">
                <div class="d-flex fw-semibold text-primary fs-base">
                    <a href="https://keenthemes.com" class="px-5" target="_blank">Terms</a>
                    <a href="https://devs.keenthemes.com" class="px-5" target="_blank">Plans</a>
                    <a href="https://themes.getbootstrap.com/product/keen-the-ultimate-bootstrap-admin-theme/" class="px-5" target="_blank">Contact Us</a>
                </div>
            </div> -->
            <!--end::Footer-->
        </div>
        <!--end::Body-->

    </div>
    <!--end::Authentication - Sign-in-->
</div>
<!--end::Root-->
    